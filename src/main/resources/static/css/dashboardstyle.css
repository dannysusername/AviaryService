@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
  --primary:       #2C9B6F;
  --primary-dark:  #1E7A54;
  --primary-light: #E6F4EE;
  --accent:        #E64E6D;
  --accent-hover:  #CC3355;
  --bg:            #F2F7F4;
  --surface:       #FFFFFF;
  --border:        #D8E6DE;
  --text:          #1B2B23;
  --text-muted:    #5E7A6A;
  --row-hover:     #F0FAF4;
  --shadow-sm:     0 1px 4px rgba(0,0,0,0.07);
  --shadow-md:     0 4px 16px rgba(0,0,0,0.09);
  --radius:        8px;
}

/* ── Reset ── */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding-top: 64px;
  font-size: 14px;
  line-height: 1.5;
}

/* ── Fixed header ── */
.fixed-header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 64px;
  background: var(--primary);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  z-index: 2000;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.fixed-header .header-left h1 {
  font-size: 1.3rem;
  font-weight: 700;
  letter-spacing: -0.3px;
}

/* ── Shared button base ── */
.fixed-header .header-right .logout-btn,
.edit-hours-btn,
.back-to-full-list-button,
#add-hobbs-btn,
#add-tach-btn,
.add-button,
.add-log-button,
#print-dashboard,
#export-excel {
  font-family: inherit;
  font-size: 13px;
  font-weight: 600;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s, opacity 0.15s;
}

.fixed-header .header-right .logout-btn {
  background: rgba(255,255,255,0.2);
  color: #fff;
  padding: 8px 16px;
}
.fixed-header .header-right .logout-btn:hover { background: rgba(255,255,255,0.3); }

.edit-hours-btn,
.back-to-full-list-button {
  background: var(--accent);
  color: #fff;
  padding: 7px 14px;
  margin-left: 8px;
}
.edit-hours-btn:hover,
.back-to-full-list-button:hover { background: var(--accent-hover); }

#add-hobbs-btn,
#add-tach-btn {
  background: var(--accent);
  color: #fff;
  padding: 5px 10px;
}
#add-hobbs-btn:hover, #add-tach-btn:hover { background: var(--accent-hover); }

#print-dashboard,
#export-excel {
  background: var(--accent);
  color: #fff;
  padding: 8px 16px;
  margin: 16px 0;
}
#print-dashboard:hover, #export-excel:hover { background: var(--accent-hover); }

/* ── Sub-header bar ── */
.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  padding: 16px 24px 0;
  background: var(--bg);
}

/* ── Hours card ── */
.my-hours {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin: 0;
  box-shadow: var(--shadow-sm);
  width: 100%;
}

.my-hours h3 {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-muted);
  margin-bottom: 10px;
}

.hours-display-and-editbutton-container {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 20px;
  flex-wrap: wrap;
}

.current-hobbs-display,
.current-tach-display {
  font-size: 15px;
  font-weight: 600;
  color: var(--primary);
}

.edit-hours-section {
  margin-top: 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.hours-edit-row,
.hours-add-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.hours-edit-row label,
.hours-add-row span {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted);
  width: 80px;
  flex-shrink: 0;
}

.edit-hours-section input {
  height: 34px;
  font-size: 14px;
  font-family: inherit;
  padding: 0 10px;
  border: 1px solid var(--border);
  border-radius: 6px;
  width: 160px;
  color: var(--text);
  background: var(--bg);
}
.edit-hours-section input:focus {
  outline: 2px solid var(--primary);
  border-color: transparent;
}

/* ── Tabs ── */
.tabs {
  display: flex;
  justify-content: center;
  gap: 6px;
  padding: 20px 24px 0;
}

.tab-button {
  padding: 8px 22px;
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--text-muted);
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  font-family: inherit;
  border-radius: 20px;
  transition: all 0.15s;
}
.tab-button:hover { background: var(--primary-light); color: var(--primary); }
.tab-button.active {
  background: var(--primary);
  border-color: var(--primary);
  color: #fff;
}

/* ── Main content area ── */
.main {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px 24px;
}

/* ── Aircraft info table ── */
.aircraft-info-table,
.hours-table {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  margin: 0;
}

.aircraft-info-table tr,
.hours-table tr {
  display: flex;
  flex-direction: row;
  border-bottom: 1px solid var(--border);
}
.aircraft-info-table tr:last-child,
.hours-table tr:last-child { border-bottom: none; }

.aircraft-info-table tr td,
.hours-table tr td { flex: 0 0 50%; }

/* Label cells */
.aircraft-info-table tr td:first-child,
.hours-table tr td:first-child {
  background: var(--primary-light);
  color: var(--primary-dark);
  font-weight: 600;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  padding: 10px 14px;
  display: flex;
  align-items: center;
}

/* Value cells */
.aircraft-info-table tr td:nth-child(2),
.hours-table tr td:nth-child(2) {
  background: var(--surface);
  padding: 6px 10px;
}

.aircraft-info-table input,
.hours-table input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid transparent;
  border-radius: 5px;
  font-family: inherit;
  font-size: 14px;
  color: var(--text);
  background: transparent;
}
.aircraft-info-table input:focus,
.hours-table input:focus {
  outline: none;
  border-color: var(--primary);
  background: var(--surface);
}

/* ── Service timeline table ── */
table:not(.aircraft-info-table):not(.hours-table):not(.logbook-table) {
  width: 100%;
  border-collapse: collapse;
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  overflow: visible;
  margin: 0;
}

/* Round the header corners since overflow:visible no longer clips them */
table:not(.aircraft-info-table):not(.hours-table):not(.logbook-table) thead th:first-child {
  border-top-left-radius: var(--radius);
}
table:not(.aircraft-info-table):not(.hours-table):not(.logbook-table) thead th:last-child {
  border-top-right-radius: var(--radius);
}

thead { border-bottom: 2px solid var(--border); }

th {
  background: var(--primary);
  color: #fff;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 11px 10px;
  text-align: left;
}

/* Override first-child rule for grip column header */
th:first-child {
  background: var(--primary);
  padding: 11px 8px;
  min-width: 24px;
  text-align: center;
}

td {
  padding: 8px 10px;
  text-align: left;
  border-bottom: 1px solid var(--border);
  vertical-align: middle;
}

/* Grip column */
td:first-child {
  background: #F5F8F6;
  text-align: center;
  padding: 8px 6px;
  min-width: 24px;
  width: 24px;
}

.grip-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  cursor: move;
  color: #aec5b8;
}

.grip-column {
  width: 24px;
  min-width: 24px;
  text-align: center;
  background: #F5F8F6;
  padding: 0;
}

/* Data rows */
.auto-save-row td { background: var(--surface); }
.auto-save-row:hover td { background: var(--row-hover); }
.auto-save-row td:first-child { background: #F5F8F6; }

/* Title rows */
.title-row td {
  background: var(--primary);
  color: #fff;
  font-weight: 700;
  font-size: 13px;
  text-align: center;
}
.title-row .title-cell:hover { background: var(--primary-dark); cursor: pointer; }

/* Add row */
.add-row td { background: var(--primary-light); }
.add-row td:first-child { background: var(--primary-light); }

/* Inputs inside table cells */
td input {
  box-sizing: border-box;
  font-family: inherit;
}

td input:focus {
  outline: 2px solid var(--primary);
  border-radius: 4px;
}

td textarea {
  width: 100%;
  min-height: 28px;
  max-height: 120px;
  min-width: 80px;
  box-sizing: border-box;
  border: 1px solid transparent;
  border-radius: 4px;
  padding: 4px 6px;
  resize: none;
  overflow-y: auto;
  font-family: inherit;
  font-size: 13px;
  color: var(--text);
  background: transparent;
}
td textarea:hover { border-color: var(--border); }
td textarea:focus { outline: 2px solid var(--primary); background: var(--surface); }

.title-input {
  width: 100%;
  box-sizing: border-box;
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: 5px;
  font-weight: 700;
  font-size: 13px;
  font-family: inherit;
}

/* Add / delete cells */
.add-button {
  width: 100%;
  padding: 8px 12px;
  background: var(--accent);
  color: #fff;
}
.add-button:hover { background: var(--accent-hover); }

.delete-header, .delete-cell { width: 36px; text-align: center; }
.delete-icon { cursor: pointer; color: #c0ccc5; font-size: 15px; }
.delete-icon:hover { color: var(--accent); }

/* ── Dropdowns ── */
.custom-dropdown {
  position: relative;
  min-height: 28px;
  display: flex;
  align-items: center;
  gap: 4px;
  z-index: 1;
}

.selected-option {
  width: 100%;
  min-height: 28px;
  border: none;
  background: transparent;
  padding: 4px 8px;
  box-sizing: border-box;
  text-align: left;
  cursor: pointer;
  font-size: 13px;
  border-radius: 4px;
}
.selected-option:hover { background: var(--primary-light); }

.dropdown-options {
  display: none;
  position: absolute;
  top: 100%;
  left: 0; right: 0;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  box-shadow: var(--shadow-md);
  z-index: 1500;
  max-height: 200px;
  min-width: 120px;
  overflow-y: auto;
}

.option {
  padding: 7px 12px;
  cursor: pointer;
  font-size: 13px;
  white-space: nowrap;
}
.option:hover { background: var(--primary-light); color: var(--primary-dark); }

.custom-option {
  display: flex;
  white-space: normal;
  word-wrap: break-word;
  max-width: 160px;
}

.add-option-container {
  display: flex;
  align-items: center;
  padding: 6px 8px;
  border-top: 1px solid var(--border);
  gap: 4px;
}

.custom-description {
  flex-grow: 1;
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: 4px;
  font-family: inherit;
  font-size: 12px;
}

.add-option-btn {
  padding: 4px 10px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
}
.add-option-btn:hover { background: var(--accent-hover); }

.remove-option-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: #c0ccc5;
  font-size: 12px;
  padding: 0 4px;
  margin-left: auto;
  flex-shrink: 0;
}
.remove-option-btn:hover { color: var(--accent); }

/* Date/type dropdown */
.input-with-dropdown {
  display: flex;
  position: relative;
  align-items: center;
  width: 100%;
  min-width: 100px;
  z-index: 1;
}

.trigger-dropdown {
  cursor: pointer;
  padding: 2px 6px;
  margin-left: auto;
  color: var(--text-muted);
  font-size: 11px;
}

.type-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 6px;
  box-shadow: var(--shadow-md);
  z-index: 1500;
  display: none;
}

.type-option {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 7px 12px;
  min-width: 110px;
  font-size: 13px;
}
.type-option:hover { background: var(--primary-light); }

.add-type {
  cursor: pointer;
  color: var(--primary);
  background: none;
  border: none;
  padding: 0 4px;
  font-size: 15px;
  font-weight: 700;
}

/* Row type selector */
.row-type-selector {
  display: flex;
  gap: 6px;
  margin-bottom: 6px;
}

.row-type-option {
  cursor: pointer;
  padding: 3px 10px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}
.row-type-option.selected {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

/* Time left */
.time-left { white-space: pre-line; font-size: 12px; }

/* ── Logbook table ── */
.logbook-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--surface);
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
}

.logbook-table th {
  background: var(--primary);
  color: #fff;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 11px 12px;
  text-align: left;
}

.logbook-table thead tr th:first-child { background: var(--primary); }

.logbook-table td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border);
  vertical-align: middle;
  background: var(--surface);
}

.logbook-table tr.log-row:hover td { background: var(--row-hover); }

.logbook-table tr.add-log-row td { background: var(--primary-light); }

.logbook-table input {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid transparent;
  border-radius: 5px;
  font-family: inherit;
  font-size: 13px;
  color: var(--text);
  background: transparent;
}
.logbook-table tr.log-row input { background: transparent; border: none; }
.logbook-table tr.add-log-row input {
  background: var(--surface);
  border: 1px solid var(--border);
}
.logbook-table tr.add-log-row input:focus {
  outline: 2px solid var(--primary);
  border-color: transparent;
}

.add-log-button {
  background: var(--accent);
  color: #fff;
  padding: 7px 16px;
  border-radius: 6px;
  font-weight: 600;
}
.add-log-button:hover { background: var(--accent-hover); }

.delete-log-icon {
  background: none;
  border: none;
  cursor: pointer;
  color: #c0ccc5;
  font-size: 14px;
}
.delete-log-icon:hover { color: var(--accent); }

/* ── Misc ── */
textarea::placeholder { display: none; }
.print-only { display: none; }

.save-status { display: inline-block; padding: 2px 6px; text-align: center; }
.save-status.saving { color: var(--accent); font-style: italic; }
.save-status.saved   { color: var(--primary); }
.save-status.error   { color: red; }

.add-row.title-mode td:nth-child(n+3):nth-child(-n+7) * { visibility: hidden; }

/* ── Mobile (≤600px) ── */
@media screen and (max-width: 600px) {
  .header { padding: 12px 12px 0; }
  .main   { padding: 12px; }
  .tabs   { padding: 16px 12px 0; }

  textarea::placeholder { display: inline; color: #999; }

  .aircraft-info-table, .hours-table { display: block; }
  .aircraft-info-table tbody, .aircraft-info-table tr,
  .hours-table tbody, .hours-table tr { display: block; }

  .aircraft-info-table td, .hours-table td {
    display: flex;
    flex-direction: row-reverse;
    justify-content: space-between;
    align-items: center;
    padding: 8px 12px;
    border: none;
    border-bottom: 1px solid var(--border);
  }

  .sortable { display: flex; flex-direction: column; gap: 8px; margin: 0; }
  .sortable-head { display: none; }

  .sortable tr:not(.add-row) {
    display: block;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: var(--surface);
    box-shadow: var(--shadow-sm);
    padding: 10px;
  }

  .sortable tr.title-row {
    background: var(--primary);
    font-weight: 700;
    text-align: center;
    padding: 12px;
    display: flex;
    justify-content: space-between;
  }
  .sortable tr.title-row td { display: block; border: none; color: #fff; }

  .sortable tr:not(.title-row):not(.add-row) td:not(.grip-cell) {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    border: none;
    border-bottom: 1px solid var(--border);
    background: var(--surface);
  }

  .sortable tr:not(.title-row):not(.add-row) td::before {
    content: attr(data-label);
    font-weight: 600;
    font-size: 11px;
    text-transform: uppercase;
    color: var(--text-muted);
    flex: 1;
  }

  .sortable td textarea, .sortable td .selected-option,
  .sortable td .input-with-dropdown { width: 100%; }

  .grip-column { display: none; }
  .custom-dropdown, .input-with-dropdown { width: 100%; }
  .dropdown-options, .type-dropdown { width: 100%; max-height: 150px; }

  .add-row {
    display: block; padding: 12px; margin: 0;
    border: 1px solid var(--border); border-radius: var(--radius);
    background: var(--primary-light);
  }
  .add-row td { display: block; border: none; padding: 6px 8px; background: var(--primary-light); }
  .add-row td::before { content: attr(data-label); font-weight: 600; font-size: 11px; display: block; margin-bottom: 4px; color: var(--text-muted); }
  .add-row td.grip-column { display: none; }

  #export-excel, #print-dashboard, .add-button { width: 100%; margin: 8px 0; padding: 12px; }

  .logbook-table { display: block; width: 100%; border: none; }
  .logbook-table thead { display: none; }
  .logbook-table tbody#logbook-body { display: flex; flex-direction: column; gap: 8px; margin: 0; }

  .logbook-table tr.log-row,
  .logbook-table tr.add-log-row {
    display: block;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
    padding: 10px;
    margin-bottom: 4px;
  }
  .logbook-table tr.log-row { background: var(--surface); }
  .logbook-table tr.add-log-row { background: var(--primary-light); }

  .logbook-table td {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    border: none;
    border-bottom: 1px solid var(--border);
    background: transparent;
  }
  .logbook-table td::before { content: attr(data-label); font-weight: 600; font-size: 11px; text-transform: uppercase; color: var(--text-muted); flex: 1; margin-right: 8px; }
  .logbook-table td > * { flex: 2; text-align: right; }
  .logbook-table input { width: 100%; padding: 8px; box-sizing: border-box; }

  .logbook-table .delete-cell,
  .logbook-table .add-cell { display: block !important; text-align: center; border-bottom: none; padding-top: 10px; }

  .logbook-table .print-only { display: none; }

  .header { flex-direction: column; align-items: flex-start; }
  .my-hours { width: 100%; margin: 8px 0; }
}

/* ── Tablet (601–1024px) ── */
@media screen and (min-width: 601px) and (max-width: 1024px) {
  table { font-size: 13px; }
  th, td { padding: 7px 8px; }
  .grip-column { min-width: 20px; }
}

/* ── Print ── */
@media print {
  .fixed-header { display: none; }
  main { padding-top: 0; }

  .no-print, .status-cell, .delete-cell, .status-header,
  .delete-header, .print-remove, .grip-cell { display: none !important; }

  .print-only { display: inline !important; visibility: visible; }

  body { padding-top: 0; font-size: 12pt; line-height: 1.4; color: black; background: white; }

  .header { position: relative; width: 100%; text-align: center; }

  table { border-collapse: collapse; page-break-inside: auto; }
  th, td { border: 1px solid black !important; padding: 8px; }
  th { background: #2C9B6F !important; -webkit-print-color-adjust: exact; }

  th.grip-column, td.grip-column, .title-grip-icon-cell { display: none; }

  .time-left { white-space: pre-line; font-weight: bold; }
  .aircraft-info-table td, .hours-table td { text-align: left; }
  .my-hours h3, #print-current-hours { visibility: visible; }

  tr { page-break-inside: avoid; page-break-after: auto; }
  .title-row td { font-weight: bold; font-size: 14pt; background: #2C9B6F !important; color: white !important; }

  .tab-print-title {
    display: block !important;
    text-align: center;
    font-size: 18pt;
    margin: 10px 0 20px 0;
    visibility: visible;
  }
}
